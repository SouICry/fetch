<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rating</title>
</head>
<body>
<div id="rating-page">
    <div class="container text-center">
        <div class="row">
            <div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-6 col-lg-4 col-md-offset-3 col-lg-offset-4">
                <h2 id="user-name" data-id="5876">User Name</h2>

                <img id="user-image" src="/placeholder/person.png"/>
                <div class="rating">
                    <span id="rating-1" class="glyphicon glyphicon-star"></span>
                    <span id="rating-2" class="glyphicon glyphicon-star"></span>
                    <span id="rating-3" class="glyphicon glyphicon-star"></span>
                    <span id="rating-4" class="glyphicon glyphicon-star"></span>
                    <span id="rating-5" class="glyphicon glyphicon-star"></span>
                </div>
                <button id="rate-user" type="button" class="btn-block btn-lg btn-primary">
                    Rate!
                </button>
                <button id="rate-skip" type="button" class="btn-block btn-lg btn-primary">
                    Skip
                </button>
                <button id="simulate-load-user" type="button" class="btn-block btn-lg btn-primary">
                    Simulate loading actual user
                </button>

            </div>
        </div>
    </div>
    <script>

        var simulated_user = {
            id: 1234567,
            name: "Bob",
            "profile-picture": null
        };
        var info_to_send = {};


        var _rating = 0;
        var r1 = $('#rating-1'), r2 = $('#rating-2'), r3 = $('#rating-3'), r4 = $('#rating-4'), r5 = $('#rating-5');
        r1.hover(function () {
            r1.addClass("selected");
            r2.removeClass("selected");
            r3.removeClass("selected");
            r4.removeClass("selected");
            r5.removeClass("selected");
            _rating = 1;
        });
        r2.hover(function () {
            r1.addClass("selected");
            r2.addClass("selected");
            r3.removeClass("selected");
            r4.removeClass("selected");
            r5.removeClass("selected");
            _rating = 2;
        });
        r3.hover(function () {
            r1.addClass("selected");
            r2.addClass("selected");
            r3.addClass("selected");
            r4.removeClass("selected");
            r5.removeClass("selected");
            _rating = 3;
        });
        r4.hover(function () {
            r1.addClass("selected");
            r2.addClass("selected");
            r3.addClass("selected");
            r4.addClass("selected");
            r5.removeClass("selected");
            _rating = 4;
        });
        r5.hover(function () {
            r1.addClass("selected");
            r2.addClass("selected");
            r3.addClass("selected");
            r4.addClass("selected");
            r5.addClass("selected");
            _rating = 5;
        });

        $('#rate-user').click(function () {

            if (_rating !== 0) {
                info_to_send.id = $('#user-name').data('id');
                info_to_send.rating = _rating;
                alert(JSON.stringify(info_to_send));
                /*$.ajax({
                 type: "POST",
                 url: "/rate",
                 data: info_to_send
                 })*/
            }
        });

        $('#simulate-load-user').click(function () {
            $('#user-name').text(simulated_user.name).data('id', simulated_user.id);
            if (simulated_user["profile-picture"] !== null) {
                $('#user-image').data('src', simulated_user["profile-picture"]);
            }
        });


    </script>
</div>
</body>
</html>